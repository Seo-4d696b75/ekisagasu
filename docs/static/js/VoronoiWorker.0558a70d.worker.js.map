{"version":3,"file":"static/js/VoronoiWorker.0558a70d.worker.js","mappings":"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","sources":["../node_modules/@babel/runtime/regenerator/index.js","../node_modules/regenerator-runtime/runtime.js","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","diagram/types.ts","diagram/utils.ts","diagram/point.ts","diagram/edge.ts","diagram/line.ts","diagram/voronoi.ts","diagram/triangle.ts","script/VoronoiWorker.ts"],"sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","\r\nexport interface Point {\r\n  x: number\r\n  y: number\r\n}\r\n\r\n\r\nexport interface Line {\r\n  a: number\r\n  b: number\r\n  c: number\r\n}\r\n\r\n\r\nexport interface Edge {\r\n  a: Point\r\n  b: Point\r\n}\r\n\r\n\r\nexport interface Triangle {\r\n  a: Point\r\n  b: Point\r\n  c: Point\r\n}\r\n\r\n\r\nexport interface Circle {\r\n  center: Point\r\n  radius: number\r\n}\r\n\r\nexport interface Rect {\r\n  left: number\r\n  top: number\r\n  right: number\r\n  bottom: number\r\n}\r\n\r\n\r\nexport class DiagramError extends Error { }","\n\nexport function stringHash(str: string): number {\n  // https://stackoverflow.com/questions/194846/is-there-any-kind-of-hash-code-function-in-javascript\n  // https://github.com/darkskyapp/string-hash/blob/master/index.js\n  var hash = 5381;\n  if (typeof str === \"string\") {\n    var i = str.length - 1;\n    while (i >= 0) {\n      hash = (hash * 33) ^ str.charCodeAt(i);\n      i--;\n    }\n  }\n  return hash & hash;\n}\n\ntype Comparator<E> = (obj1: E, obj2: E) => boolean\ntype HashGetter<E> = (e: E) => number\n\n/**\n * primitiveObject\n * comparator\n * hash\n * comparator(obj1,obj2) === true  hash(obj1) === hash(obj2) \n * \"===\"primitive\n * \n * hash(obj1) === hash(obj2)  comparator(obj1,obj2) === false \n */\nexport class ObjectSet<E> {\n\n  /**\n   * \n   * @param {(obj1,obj2) => boolean} comparator \n   * @param {(obj) => hashCode} hash \n   * @param {iterable} collection \n   */\n  constructor(comparator: Comparator<E>, hash: HashGetter<E>, collection?: Array<E>) {\n    this.compare = comparator;\n    this.hash = hash;\n    this.map = new Map();\n    if (collection) {\n      collection.forEach(element => {\n        this.add(element);\n      });\n    }\n  }\n\n  compare: Comparator<E>\n  hash: HashGetter<E>\n  map: Map<number, Array<E>>\n\n  clone() {\n    var tmp = new ObjectSet<E>(this.compare, this.hash);\n    for (let pair of this.map.entries()) {\n      var key: number = pair[0];\n      var list = pair[1];\n      tmp.map.set(key, Array.from(list));\n    }\n    return tmp;\n  }\n\n  /**\n   * \n   * @param {*} e \n   * @return {boolean} true, false otherwise\n   */\n  add(e: E): boolean {\n    var hash = this.hash(e);\n    var list = this.map.get(hash);\n    if (list) {\n      if (list.every(element => !this.compare(element, e))) {\n        list.push(e);\n        return true;\n      }\n      return false;\n    } else {\n      list = [e];\n      this.map.set(hash, list);\n      return true;\n    }\n  }\n\n  /**\n   * \n   * @param {*} e \n   */\n  has(e: E): boolean {\n    var list = this.map.get(this.hash(e));\n    return !!list && list.some(element => this.compare(element, e));\n  }\n\n  /**\n   * \n   * @param {*} e \n   * @return {boolean} true, false otherwise\n   */\n  remove(e: E): boolean {\n    var hash = this.hash(e);\n    var list = this.map.get(hash);\n    if (list) {\n      if (list.length === 1 && this.compare(list[0], e)) {\n        this.map.delete(hash);\n        return true;\n      }\n      var removed = list.filter(element => !this.compare(element, e));\n      if (list.length === removed.length) {\n        return false;\n      } else {\n        this.map.set(hash, removed);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  size(): number {\n    var size = 0;\n    for (let list of this.map.values()) {\n      size += list.length;\n    }\n    return size;\n  }\n\n  clear(): void {\n    this.map.clear();\n  }\n\n  /**\n   * \n   * @param {(obj) => void} consumer \n   */\n  forEach(consumer: (e: E) => void): void {\n    for (let value of this) {\n      consumer(value);\n    }\n  }\n\n  *[Symbol.iterator]() {\n    var size = 0;\n    for (let list of this.map.values()) {\n      for (let value of list) {\n        size += 1;\n        yield value;\n      }\n    }\n    return size;\n  }\n\n  /**\n   * \n   * @param {(obj) => boolean} predicate \n   */\n  filter(predicate: (e: E) => boolean): ObjectSet<E> {\n    var tmp = new ObjectSet(this.compare, this.hash);\n    for (let element of this) {\n      if (predicate(element)) tmp.add(element);\n    }\n    return tmp;\n  }\n\n  /**\n   * \n   * @param {(obj) => boolean} predicate \n   */\n  removeIf(predicate: (e: E) => boolean): ObjectSet<E> {\n    var tmp = new ObjectSet(this.compare, this.hash);\n    for (let element of this) {\n      if (!predicate(element)) tmp.add(element);\n    }\n    return tmp;\n  }\n}\n\ntype MapEntry<K, V> = {\n  key: K,\n  value: V | null\n}\n\nexport class ObjectMap<K, V> {\n\n  constructor(comparator: Comparator<K>, hash: HashGetter<K>) {\n    this.compare = comparator;\n    this.hash = hash;\n    this.map = new Map();\n  }\n\n  compare: Comparator<K>\n  hash: HashGetter<K>\n  map: Map<number, Array<MapEntry<K, V>>>\n\n  put(key: K, value: V | null): void {\n    var hash = this.hash(key);\n    var list = this.map.get(hash);\n    if (list) {\n      var index = list.findIndex(pair => this.compare(pair.key, key));\n      if (index < 0) {\n        var pair: MapEntry<K, V> = {\n          key: key,\n          value: value\n        }\n        list.push(pair);\n      } else {\n        list[index].value = value;\n      }\n    } else {\n      list = [\n        {\n          key: key,\n          value: value\n        }\n      ];\n      this.map.set(hash, list);\n    }\n  }\n\n  has(key: K): boolean {\n    var list = this.map.get(this.hash(key));\n    return !!list && list.some(pair => this.compare(pair.key, key));\n  }\n\n  get(key: K, defaultValue?: V | null): V | null {\n    var list = this.map.get(this.hash(key));\n    if (!list) return null;\n    var index = list.findIndex(pair => this.compare(pair.key, key));\n    if (index < 0) {\n      if (defaultValue) return defaultValue\n      return null\n    } else {\n      return list[index].value;\n    }\n  }\n\n  getValue(key: K): V {\n    var value = this.get(key)\n    if (value) return value\n    throw new Error(`no such element. key:${key}`)\n  }\n\n  /**\n   * keyvalue\n   * @param {*} key \n   * @return {obj} value, null\n   */\n  remove(key: K): V | null {\n    var hash = this.hash(key);\n    var list = this.map.get(hash);\n    if (list) {\n      if (list.length === 1 && this.compare(list[0].key, key)) {\n        this.map.delete(hash);\n        return list[0].value;\n      }\n      var index = list.findIndex(pair => this.compare(pair.key, key));\n      if (index < 0) {\n        return null;\n      } else {\n        var value = list[index].value;\n        var removed = list.filter(pair => !this.compare(pair.key, key));\n        this.map.set(hash, removed);\n        return value;\n      }\n    }\n    return null;\n  }\n\n  size(): number {\n    var size = 0;\n    for (let list of this.map.values()) {\n      size += list.length;\n    }\n    return size;\n  }\n\n  clear(): void {\n    this.map.clear();\n  }\n\n  /**\n   * \n   * @param {(key) => void} consumer \n   */\n  forEachKey(consumer: (key: K) => void) {\n    for (let key of this.keys()) {\n      consumer(key);\n    }\n  }\n\n  * keys() {\n    for (let list of this.map.values()) {\n      for (let entry of list) {\n        yield entry.key;\n      }\n    }\n  }\n\n  /**\n   * \n   * @param {(value) => void} consumer \n   */\n  forEachValue(consumer: (value: V | null) => void) {\n    for (let value of this.values()) {\n      consumer(value);\n    }\n  }\n\n  * values() {\n    for (let list of this.map.values()) {\n      for (let entry of list) {\n        yield entry.value;\n      }\n    }\n  }\n\n  /**\n   * \n   * @param {(entry: {key:any, value:any}) => void} consumer \n   */\n  forEachEntries(consumer: (e: MapEntry<K, V>) => void) {\n    for (let entry of this.entries()) {\n      consumer(entry);\n    }\n  }\n\n  * entries() {\n    for (let list of this.map.values()) {\n      for (let entry of list) {\n        var tmp = {\n          key: entry.key,\n          value: entry.value\n        };\n        yield tmp;\n      }\n    }\n  }\n\n}","import { stringHash } from \"./utils\"\nimport { Point, DiagramError } from \"./types\"\n\nexport const ZERO: Point = init(0, 0)\n\nclass PointInitError extends DiagramError {\n  constructor(x: number, y: number) {\n    super(`cannot get an instance with x:${x} y:${y}`)\n  }\n}\n\nexport function toString(p: Point, digit?: number) {\n  if (digit && Number.isInteger(digit) && digit > 0) {\n    return `(${p.x.toFixed(digit)},${p.y.toFixed(digit)})`\n  }\n  return `(${p.x},${p.y})`\n}\n\nexport function isPoint(p: any): p is Point {\n  return p !== null && typeof p === \"object\" && typeof p.x === \"number\" && typeof p.y === \"number\"\n}\n\nexport function init(x: number, y: number): Point {\n  if (Number.isFinite(x) && Number.isFinite(y)) {\n    return {\n      x: x,\n      y: y\n    }\n  }\n  throw new PointInitError(x, y)\n}\n\nexport function equals(p1: Point, p2: Point): boolean {\n  return p1.x === p2.x && p1.y === p2.y\n}\n\nexport function hashCode(point: Point): number {\n  var str = `${point.x.toString()},${point.y.toString}`\n  return stringHash(str)\n}\n\nexport function getDivision(p1: Point, p2: Point, index: number): Point {\n  return {\n    x: p1.x * (1.0 - index) + p2.x * index,\n    y: p1.y * (1.0 - index) + p2.y * index,\n  }\n}\n\nexport function measure(p1: Point, p2: Point): number {\n  return Math.sqrt(\n    Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2)\n  )\n}\n\nexport function getMiddlePoint(p1: Point, p2: Point): Point {\n  return {\n    x: (p1.x + p2.x) / 2,\n    y: (p1.y + p2.y) / 2,\n  }\n}\n\nexport function compare(p1: Point, p2: Point): number {\n  if (p1.x === p2.x) {\n    if (p1.y === p2.y) {\n      return 0\n    } else if (p1.y < p2.y) {\n      return -1\n    } else {\n      return 1\n    }\n  } else if (p1.x < p2.x) {\n    return -1\n  } else {\n    return 1\n  }\n}","import * as line from \"./line\";\nimport * as point from \"./point\";\nimport { Point, Line, Edge, DiagramError } from \"./types\"\n\nexport function toString(e: Edge) {\n  return `{${point.toString(e.a)}-${point.toString(e.b)}}`\n}\n\nexport function isEdge(p: any): p is Edge {\n  return p !== null &&\n    typeof p === \"object\" &&\n    point.isPoint(p.a) &&\n    point.isPoint(p.b)\n\n}\n\nclass EdgeError extends DiagramError { }\n\nclass EdgeInitError extends DiagramError {\n  constructor(p: Point) {\n    super(`point duplicated: ${point.toString(p)}`)\n  }\n}\n\nexport function init(a: Point, b: Point): Edge {\n  if (a.x < b.x) {\n    return { a: a, b: b };\n  } else if (a.x > b.x) {\n    return { a: b, b: a };\n  } else {\n    if (a.y < b.y) {\n      return { a: a, b: b };\n    } else if (a.y > b.y) {\n      return { a: b, b: a };\n    } else {\n      throw new EdgeInitError(a)\n    }\n  }\n}\n\nexport function toLine(edge: Edge): Line {\n  return line.init(edge.a, edge.b);\n}\n\nexport function equals(self: Edge, other: Edge): boolean {\n  return point.equals(self.a, other.a) && point.equals(self.b, other.b);\n}\n\nexport function hashCode(edge: Edge): number {\n  var hash = 17;\n  hash = 31 * hash + point.hashCode(edge.a);\n  hash = 31 * hash + point.hashCode(edge.b);\n  return hash & hash;\n}\n\nexport function getMiddlePoint(edge: Edge): Point {\n  return {\n    x: (edge.a.x + edge.b.x) / 2,\n    y: (edge.a.y + edge.b.y) / 2,\n  };\n}\n\nexport function onEdge(p1: Edge | Point, p2: Point, p3?: Point): boolean {\n  if (isEdge(p1)) {\n    p3 = p2\n    var edge = p1\n    p1 = edge.a\n    p2 = edge.b\n  }\n  if (p3) {\n    var start: Point = p1\n    var end: Point = p2\n    var p: Point = p3\n    if ((start.x - p.x) * (end.x - p.x) + (start.y - p.y) * (end.y - p.y) <= 0) {\n      return line.onLine(start, end, p);\n    } else {\n      return false;\n    }\n  }\n  throw new EdgeError(\"invalid arguments\")\n}\n\nexport function getDivision(edge: Edge, index: number): Point {\n  return point.getDivision(edge.a, edge.b, index);\n}\n\n/**\n * \n * @param {edge} edge \n * @param {edge/line} other \n * @return null if no such point\n */\nexport function getIntersection(edge: Edge, other: Edge | Line): Point | null {\n  if (line.isLine(other)) {\n    var p = line.getIntersection(toLine(edge), other);\n    if (p) {\n      var v = (edge.a.x - p.x) * (edge.b.x - p.x) + (edge.a.y - p.y) * (edge.b.y - p.y);\n      return v <= 0 ? p : null;\n    }\n    return null\n  } else {\n    p = getIntersection(edge, toLine(other));\n    if (p) {\n      v = (other.a.x - p.x) * (other.b.x - p.x) + (other.a.y - p.y) * (other.b.y - p.y);\n      if (v <= 0) return p;\n    }\n    return null;\n  }\n}\n\nexport function getDistance(edge: Edge, p: Point): number {\n  var v1 = (p.x - edge.a.x) * (edge.b.x - edge.a.x) + (p.y - edge.a.y) * (edge.b.y - edge.a.y);\n  var v2 = (p.x - edge.b.x) * (edge.a.x - edge.b.x) + (p.y - edge.b.y) * (edge.a.y - edge.b.y);\n  if (v1 > 0 && v2 > 0) {\n    return line.getDistance(toLine(edge), p);\n  } else if (v1 <= 0) {\n    return point.measure(edge.a, p);\n  } else {\n    return point.measure(edge.b, p);\n  }\n}","import * as point from \"./point\"\nimport * as edge from \"./edge\"\nimport { Point, Line, Edge, DiagramError } from \"./types\"\n\nclass LineInitError extends DiagramError { }\n\nclass LineError extends DiagramError {\n  constructor(mes: string, line?: Line) {\n    super(line ? `${mes} line:${toString(line)}` : mes)\n  }\n}\n\nexport function toString(line: Line): string {\n  return `{ax+by+c=0 with a:${line.a},b:${line.b},c:${line.c}}`\n}\n\nexport function isLine(p: any): p is Line {\n  return p !== null &&\n    typeof p === \"object\" &&\n    typeof p.a === \"number\" &&\n    typeof p.b === \"number\" &&\n    typeof p.c === \"number\"\n}\n\n/**\n * Gets an instance of a new line. Pairs of arguments are; \n * (1) a, b, c: number => a line defined by equation: ax + by + c = 0\n * (2) a, b: Point => a line which goes through the both points\n * @param a \n * @param b \n * @param c \n */\nexport function init(a: number | Point, b: number | Point, c?: number): Line {\n  if (typeof a === \"number\" && typeof b === \"number\") {\n    if (typeof c === \"number\") {\n      if (b === 0) {\n        if (a === 0) {\n          throw new LineInitError(\"a = b = 0\")\n        }\n        return {\n          a: 1.0,\n          b: 0.0,\n          c: c / a,\n        };\n      } else {\n        return {\n          a: a / b,\n          b: 1.0,\n          c: c / b,\n        };\n      }\n    } else {\n      return {\n        a: -a,\n        b: 1.0,\n        c: -b,\n      };\n    }\n  } else if (point.isPoint(a) && point.isPoint(b)) {\n    if (point.equals(a, b)) {\n      throw new LineInitError(`duplicated point: ${point.toString(a)}`)\n    } else if (a.x === b.x) {\n      return {\n        a: 1.0,\n        b: 0.0,\n        c: -(a.x + b.x) / 2,\n      };\n    } else {\n      return {\n        a: (b.y - a.y) / (a.x - b.x),\n        b: 1.0,\n        c: (b.x * a.y - a.x * b.y) / (a.x - b.x),\n      };\n    }\n  }\n  throw new LineInitError(`cannot get an instance with a:${a} b:${b} c:${c}`)\n}\n\n/**\n * Check if a point is located on the given line. \n * (1) a: Line, b: Point => whether point 'b' is located on line 'a' \n * (2) a: Point, b :Point, c: Point => whether point 'c' is located on a line connecting two points 'a' and 'b'\n * @param {line/point} a \n * @param {point} b \n * @param {point} c \n */\nexport function onLine(a: Line | Point, b: Point, c?: Point): boolean {\n  if (isLine(a) && point.isPoint(b)) {\n    var line = a;\n    var p = b;\n    return Math.abs(line.a * p.x + line.b * p.y + line.c) === 0;\n  }\n  if (point.isPoint(a) && point.isPoint(b) && point.isPoint(c)) {\n    var v = (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x);\n    return v === 0;\n  }\n  throw new LineError(\"invalid arguments\")\n}\n\nexport function equals(l1: Line, l2: Line): boolean {\n  return l1.a === l2.a && l1.b === l2.b && l1.c === l2.c;\n}\n\nexport function getIntersection(l1: Line, l2: Line | Edge): Point | null {\n  if (edge.isEdge(l2)) {\n    // l1:Line l2:edge\n    var line = l1;\n    var e = l2;\n    if ((line.a * e.a.x + line.b * e.a.y + line.c) * (line.a * e.b.x + line.b * e.b.y + line.c) <= 0) {\n      l2 = edge.toLine(e);\n    } else {\n      return null;\n    }\n  }\n  // l1:Line l2:Line\n  var det = l1.a * l2.b - l2.a * l1.b;\n  if (det === 0) {\n    return null;\n  } else {\n    return {\n      x: (l1.b * l2.c - l2.b * l1.c) / det,\n      y: (l2.a * l1.c - l1.a * l2.c) / det,\n    };\n  }\n}\n\nexport function getPerpendicularBisector(p1: Point | Edge, p2?: Point): Line {\n  if (edge.isEdge(p1)) {\n    // p1:edge p2:null\n    var e = p1;\n    p1 = e.a;\n    p2 = e.b;\n  }\n  if (p2) {\n\n    // p1,p2:Point\n    return {\n      a: p1.x - p2.x,\n      b: p1.y - p2.y,\n      c: (-Math.pow(p1.x, 2) - Math.pow(p1.y, 2) + Math.pow(p2.x, 2) + Math.pow(p2.y, 2)) / 2,\n    }\n  }\n  throw new LineError(`invalid arguments p1:${p1},p2:${p2}`)\n}\n\nexport function getDistance(line: Line, point: Point): number {\n  return Math.abs(point.x * line.a + point.y * line.b + line.c) / Math.sqrt(line.a * line.a + line.b * line.b);\n}\n\nexport function onSameSide(line: Line, p1: Point, p2: Point): boolean {\n  var v1 = line.a * p1.x + line.b * p1.y + line.c;\n  var v2 = line.a * p2.x + line.b * p2.y + line.c;\n  return v1 * v2 >= 0;\n}\n","import { Point, Line, Edge, Triangle, DiagramError } from \"./types\"\nimport * as point from \"./point\";\nimport * as line from \"./line\";\nimport * as triangle from \"./triangle\";\nimport { ObjectSet } from \"./utils\";\n\nclass VoronoiError extends DiagramError {\n  constructor(mes: string) {\n    super(mes)\n  }\n}\n\n/**\n * \n */\ntype StepDirection = \"up\" | \"zero\" | \"down\"\n\nfunction invert(step: StepDirection): StepDirection {\n  switch (step) {\n    case \"up\":\n      return \"down\"\n    case \"down\":\n      return \"up\"\n    case \"zero\":\n      return \"zero\"\n  }\n}\n\nconst ERROR = Math.pow(2, -30);\n\n/**\n * Point +    \n * Bisector\n */\nclass Node<T extends Point> implements Point {\n\n  constructor(p: Point, a: Intersection<T>, b: Intersection<T>) {\n    this.x = p.x;\n    this.y = p.y;\n    this._p1 = a;\n    this._p2 = b;\n    var cnt = 0;\n    if (a.line.isBoundary) cnt++;\n    if (b.line.isBoundary) cnt++;\n    if (cnt === 0) {\n      this.onBoundary = false;\n      this.index = -1;\n    } else if (cnt === 1) {\n      this.onBoundary = true;\n      this.index = -1;\n    } else {\n      this.onBoundary = false;\n      this.index = 0;\n    }\n  }\n\n  x: number\n  y: number\n\n  // \n  _p1: Intersection<T> | null\n  _p2: Intersection<T> | null\n\n  get p1(): Intersection<T> {\n    if (this._p1) return this._p1\n    throw new VoronoiError(\"no intersection\")\n  }\n\n\n  get p2(): Intersection<T> {\n    if (this._p2) return this._p2\n    throw new VoronoiError(\"no intersection\")\n  }\n\n  index: number\n  onBoundary: boolean\n\n  /**\n   * .\n   * @param previous from which you are traversing\n   * @return Node\n   */\n  next(previous: Point) {\n    const p1 = this.p1;\n    const p2 = this.p2;\n    if (p1.hasNext && point.equals(p1.next, previous)) {\n      return this.calcNext(p1, p2, false, invert(p1.step));\n    } else if (p1.hasPrevious && point.equals(p1.previous, previous)) {\n      return this.calcNext(p1, p2, true, p1.step);\n    } else if (p2.hasNext && point.equals(p2.next, previous)) {\n      return this.calcNext(p2, p1, false, invert(p2.step));\n    } else if (p2.hasPrevious && point.equals(p2.previous, previous)) {\n      return this.calcNext(p2, p1, true, p2.step);\n    } else {\n      throw new VoronoiError(\"next node not found.\");\n    }\n  }\n\n  calcNext(current: Intersection<T>, other: Intersection<T>, forward: boolean, step: StepDirection) {\n    if (this.onBoundary && this.index > 0) {\n      // FrameVertex\n      // \n      return forward ? current.next.node : current.previous.node;\n    } else {\n      // Frame step = Node.STEP_UP/DOWN\n      // FrameVertex step = Node.STEP_ZERO\n      return other.neighbor(invert(step)).node;\n    }\n  }\n\n  /**\n   * \n         * .<br>\n         * Frame\n         * FrameVertex0\n   * @param previous \n   */\n  nextDown(previous: Point): Node<T> {\n    var target: any = null;\n    if (this.p1.isNeighbor(previous)) {\n      target = this.p2;\n    } else if (this.p2.isNeighbor(previous)) {\n      target = this.p1;\n    } else {\n      throw new VoronoiError(\"neighbor not found\");\n    }\n    if (target.hasNeighbor(\"down\")) {\n      return target.neighbor(\"down\").node;\n    } else {\n      return target.neighbor(\"zero\").node;\n    }\n  }\n\n  nextUp(previous: Point): Node<T> | null {\n    var t1: any = null;\n    var t2: any = null;\n    if (this.p1.isNeighbor(previous)) {\n      t1 = this.p2;\n      t2 = this.p1;\n    } else if (this.p2.isNeighbor(previous)) {\n      t1 = this.p1;\n      t2 = this.p2;\n    } else {\n      throw new VoronoiError(\"neighbor not found\");\n    }\n    if (t1.hasNeighbor(\"up\")) {\n      return t1.neighbor(\"up\").node;\n    } else if (t2.hasNeighbor(\"up\")) {\n      return t2.neighbor(\"up\").node;\n    } else {\n      return null;\n    }\n  }\n\n  onSolved(level: number): void {\n    this.p1.onSolved();\n    this.p2.onSolved();\n    if (this.index < 0) {\n      if (this.p1.line.isBoundary || this.p2.line.isBoundary) {\n        this.index = level;\n      } else {\n        this.index = level + 0.5;\n      }\n    } else if (Math.round(this.index) !== this.index) {\n      if (this.index + 0.5 !== level) throw new VoronoiError(\"index mismatch\");\n    }\n  }\n\n  hasSolved(): boolean {\n    return this.index >= 0;\n  }\n\n  release() {\n    this._p1 = null;\n    this._p2 = null;\n  }\n\n}\n\n/**\n * \n * \n */\nclass Intersection<T extends Point> implements Point {\n\n  constructor(intersection: Point, b: Bisector<T>, other?: Line, center?: Point) {\n    this.line = b;\n    this.x = intersection.x;\n    this.y = intersection.y;\n\n    if (other && center) {\n\n      var dx = b.line.b;\n      var dy = -b.line.a;\n      if (dx < 0 || (dx === 0 && dy < 0)) {\n        dx *= -1;\n        dy *= -1;\n      }\n      var p = {\n        x: intersection.x + dx,\n        y: intersection.y + dy\n      };\n      this.step = line.onSameSide(other, p, center) ? \"down\" : \"up\";\n    } else {\n      this.step = \"zero\";\n    }\n  }\n\n  x: number\n  y: number\n  line: Bisector<T>\n  step: StepDirection\n\n  _previous: Intersection<T> | null | undefined = undefined\n  _next: Intersection<T> | null | undefined = undefined\n  index: number = 0\n\n  _node: Node<T> | null = null\n\n  get hasPrevious(): boolean {\n    if (this._previous === undefined) {\n      throw new VoronoiError(\"previous not init yet\")\n    }\n    return this._previous !== null\n  }\n\n  get previous(): Intersection<T> {\n    if (this._previous) return this._previous\n    if (this._previous === undefined) {\n      throw new VoronoiError(\"previous not init yet\")\n    }\n    throw new VoronoiError(\"no previous\")\n  }\n\n  get hasNext(): boolean {\n    if (this._next === undefined) {\n      throw new VoronoiError(\"next not init yet\")\n    }\n    return this._next !== null\n  }\n\n  get next(): Intersection<T> {\n    if (this._next) return this._next\n    if (this._next === undefined) {\n      throw new VoronoiError(\"next not init yet\")\n    }\n    throw new VoronoiError(\"no next\")\n  }\n\n  get node(): Node<T> {\n    if (this._node) return this._node\n    throw new VoronoiError(\"no node\")\n  }\n\n  set node(value: Node<T>) {\n    if (this._node) throw new VoronoiError(\"node already set\")\n    this._node = value\n  }\n\n  insert(previous: Intersection<T> | null, next: Intersection<T> | null, index: number): void {\n    this._previous = previous;\n    this._next = next;\n    if (this._previous) {\n      this._previous._next = this;\n    }\n    if (this._next) {\n      this._next._previous = this;\n      this._next.incrementIndex();\n    }\n    this.index = index;\n  }\n\n  incrementIndex(): void {\n    this.index++;\n    if (this._next) this._next.incrementIndex();\n  }\n\n  isNeighbor(p: Point): boolean {\n    return (this.hasNext && point.equals(this.next, p))\n      || (this.hasPrevious && point.equals(this.previous, p));\n  }\n\n  hasNeighbor(step: StepDirection): boolean {\n    if (step === \"zero\" && this.step === \"zero\") {\n      return true;\n    } else if (step !== \"zero\" && this.step !== \"zero\") {\n      return (step === this.step) ? !!this._next : !!this._previous;\n    }\n    return false;\n  }\n\n  neighbor(step: StepDirection): Intersection<T> {\n    if (step === \"zero\" && this.step === \"zero\") {\n      if (this._previous) return this._previous;\n      if (this._next) return this._next;\n    } else if (step !== \"zero\" && this.step !== \"zero\") {\n      return (step === this.step) ? this.next : this.previous;\n    }\n    throw new VoronoiError(\"neighbor step invalid.\");\n  }\n\n  onSolved(): void {\n    this.line.onIntersectionSolved(this);\n  }\n\n  release(): void {\n    this._previous = null;\n    this._next = null;\n    if (this._node) {\n      this._node.release();\n      this._node = null;\n    }\n  }\n}\n\n/**\n * \n */\nclass Bisector<T extends Point> {\n\n  constructor(bisector: Line, p?: T) {\n    this.line = bisector;\n    this.intersections = [];\n    if (p) {\n      this.delaunayPoint = p;\n      this.isBoundary = false;\n    } else {\n      this.delaunayPoint = null;\n      this.isBoundary = true;\n    }\n  }\n\n  line: Line\n  intersections: Array<Intersection<T>>\n  isBoundary: boolean\n  delaunayPoint: T | null\n\n  solvedPointIndexFrom: number = Number.MAX_SAFE_INTEGER\n  solvedPointIndexTo: number = -1\n\n  /**\n   * \n   * @param boundary\n   */\n  inspectBoundary(boundary: Edge): void {\n    var p = line.getIntersection(this.line, boundary);\n    if (p) {\n      var i = new Intersection(p, this)\n      this.addIntersection(i);\n    }\n  }\n\n  onIntersectionSolved(intersection: Intersection<T>): void {\n    var index = intersection.index;\n    this.solvedPointIndexFrom = Math.min(\n      this.solvedPointIndexFrom,\n      index\n    );\n    this.solvedPointIndexTo = Math.max(\n      this.solvedPointIndexTo,\n      index\n    );\n  }\n\n  addIntersection(intersection: Intersection<T>): void {\n    const size = this.intersections.length;\n    var index = this.addIntersectionAt(intersection, 0, size);\n    intersection.insert(\n      index > 0 ? this.intersections[index - 1] : null,\n      index < size ? this.intersections[index] : null,\n      index\n    );\n    this.intersections.splice(index, 0, intersection);\n    if (this.solvedPointIndexFrom < this.solvedPointIndexTo) {\n      if (index <= this.solvedPointIndexFrom) {\n        this.solvedPointIndexFrom++;\n        this.solvedPointIndexTo++;\n      } else if (index <= this.solvedPointIndexTo) {\n        throw new VoronoiError(\"new intersection added to solved range.\");\n      }\n    }\n  }\n\n  addIntersectionAt(p: Point, indexFrom: number, indexTo: number): number {\n    if (indexFrom === indexTo) {\n      return indexFrom;\n    } else {\n      var mid = Math.floor((indexFrom + indexTo - 1) / 2);\n      var r = point.compare(p, this.intersections[mid]);\n      if (r < 0) {\n        return this.addIntersectionAt(p, indexFrom, mid);\n      } else if (r > 0) {\n        return this.addIntersectionAt(p, mid + 1, indexTo);\n      } else {\n        throw new VoronoiError(\"same point already added in this bisector\");\n      }\n    }\n  }\n\n  release(): void {\n    this.intersections.forEach(i => i.release());\n    this.intersections.splice(0, this.intersections.length)\n  }\n\n}\n\n/** \n * \n */\nexport type PointProvider<T extends Point> = (p: T) => Promise<Array<T>>\n\n/**\n * \n * @param index \n * @param polygon \n */\nexport type Callback = (index: number, polygon: Array<Point>) => void\n\n/**\n * \n */\nexport class Voronoi<T extends Point> {\n\n  /**\n   * \n   * @param {triangle} frame \n   * @param {(point)=>Promise<array>} provider \n   */\n  constructor(frame: Triangle, provider: PointProvider<T>) {\n    this.container = frame;\n    this.provider = provider;\n  }\n\n  container: Triangle\n  provider: PointProvider<T>\n  running: boolean = false\n\n  /**\n   * \n   * \n   * \n   * @param {number} level \n   * @param {point} center \n   * @param {(index: number,polygon: array)=>void} callback \n   * @return 1..indexPromise\n   */\n  async execute(level: number, center: T, callback: Callback | null): Promise<Array<Array<Point>>> {\n    if (this.running) return Promise.reject(\"already running\");\n    this.running = true;\n\n    try {\n\n      this.center = center;\n      this.level = level;\n      this.targetLevel = 1;\n      this.list = null;\n      this.time = performance.now();\n      this.result = [];\n      this.callback = callback;\n      this.bisectors = [];\n      this.addBoundary(line.init(this.container.a, this.container.b));\n      this.addBoundary(line.init(this.container.b, this.container.c));\n      this.addBoundary(line.init(this.container.c, this.container.a));\n      this.requestedPoint = new ObjectSet(point.equals, point.hashCode);\n      this.addedPoint = new ObjectSet(point.equals, point.hashCode);\n      this.requestedPoint.add(center);\n      this.addedPoint.add(center);\n      const neighbors = await this.provider(center);\n      for (let p of neighbors) {\n        if (this.addedPoint.add(p))\n          this.addBisector(p);\n      }\n    } catch (e) {\n      return Promise.reject(e)\n    }\n    return this.searchPolygon();\n\n  }\n\n  center: Point = point.ZERO\n  level: number = 0\n  targetLevel: number = 1\n  list: Array<Node<T>> | null = null\n  time: number = 0\n  result: Array<Array<Point>> = []\n  callback: Callback | null = null\n  bisectors: Array<Bisector<T>> = []\n\n\n  requestedPoint: ObjectSet<Point> = new ObjectSet(point.equals, point.hashCode)\n  addedPoint: ObjectSet<Point> = new ObjectSet(point.equals, point.hashCode)\n\n  private async searchPolygon(): Promise<Array<Array<Point>>> {\n    var loopTime = performance.now();\n    var promise: Array<Promise<void>> = [];\n    var list = this.traverse(this.list, promise);\n    list.forEach(node => node.onSolved(this.targetLevel));\n    this.result.push(list);\n    this.list = list;\n    await Promise.all(promise);\n\n    console.log(`execute index:${this.targetLevel} time:${performance.now() - loopTime}`);\n    if (this.callback && this.list) {\n      this.callback(this.targetLevel - 1, this.list);\n    }\n    const nextLevel = this.targetLevel + 1;\n    if (nextLevel <= this.level) {\n      this.targetLevel = nextLevel;\n      return this.searchPolygon();\n    } else {\n      this.bisectors.forEach(b => b.release());\n      console.log(`execute done. time:${performance.now() - this.time}`);\n\n      this.running = false;\n\n      return this.result;\n    }\n\n  }\n\n  private traverse(list: Array<Node<T>> | null, tasks: Array<Promise<void>>) {\n    var next: Node<T> | null = null\n    var previous: Node<T> | null = null\n    if (!list) {\n      var history = new ObjectSet(point.equals, point.hashCode);\n      var sample = this.bisectors[0];\n      next = sample.intersections[1].node;\n      previous = sample.intersections[0].node;\n      while (history.add(next)) {\n        var current: Node<T> = next;\n        next = current.nextDown(previous);\n        previous = current;\n      }\n    } else {\n      previous = list[list.length - 1];\n      for (let n of list) {\n        next = n.nextUp(previous);\n        previous = n;\n        if (next && !next.hasSolved()) break;\n      }\n    }\n\n    if (!next || !previous || next.hasSolved()) {\n      throw new VoronoiError(\"fail to traverse polygon\");\n    }\n\n    var start = next;\n    list = [start];\n    while (true) {\n      this.requestExtension(next.p1.line.delaunayPoint, tasks);\n      this.requestExtension(next.p2.line.delaunayPoint, tasks);\n      current = next;\n      next = current.next(previous);\n      previous = current;\n      if (point.equals(start, next)) break;\n      list.push(next);\n    }\n\n    return list;\n  }\n\n  private requestExtension(target: T | null, tasks: Array<Promise<void>>): void {\n    if (target && this.requestedPoint.add(target)) {\n      var task = this.provider(target).then(neighbors => {\n        for (let p of neighbors) {\n          if (this.addedPoint.add(p)) {\n            this.addBisector(p);\n          }\n        }\n      });\n      tasks.push(task);\n    }\n  }\n\n  /**\n   * \n   * @param {*} self Line \n   */\n  private addBoundary(self: Line): void {\n    var boundary = new Bisector<T>(self);\n    this.bisectors.forEach(preexist => {\n      var p = line.getIntersection(boundary.line, preexist.line);\n      if (!p) throw new VoronoiError(\"intersection not found\")\n      var a = new Intersection<T>(p, boundary);\n      var b = new Intersection<T>(p, preexist);\n      var n = new Node<T>(p, a, b);\n      a.node = n;\n      b.node = n;\n      boundary.addIntersection(a);\n      preexist.addIntersection(b);\n    });\n    this.bisectors.push(boundary);\n  }\n\n  private addBisector(intersection: T) {\n    var bisector = new Bisector(\n      line.getPerpendicularBisector(intersection, this.center),\n      intersection\n    );\n    this.bisectors.forEach(preexist => {\n      var p = line.getIntersection(bisector.line, preexist.line);\n      if (p && triangle.containsPoint(this.container, p, ERROR)) {\n        var a = new Intersection<T>(p, bisector, preexist.line, this.center);\n        var b = new Intersection<T>(p, preexist, bisector.line, this.center);\n        var n = new Node(p, a, b);\n        a.node = n;\n        b.node = n;\n        bisector.addIntersection(a);\n        preexist.addIntersection(b);\n      }\n    });\n    this.bisectors.push(bisector);\n  }\n\n\n\n}","import * as line from \"./line\";\nimport * as point from \"./point\";\nimport * as edge from \"./edge\";\nimport * as circle from \"./circle\";\nimport { Point, Line, Edge, Triangle, Circle, DiagramError } from \"./types\"\n\nclass TriangleInitError extends DiagramError { }\n\nexport function init(a: Edge | Point, b: Point, c?: Point): Triangle {\n  if (edge.isEdge(a)) {\n    var e = a;\n    c = b;\n    b = e.b;\n    a = e.a;\n  }\n  if (c) {\n\n    if (line.onLine(a, b, c)) {\n      throw new TriangleInitError(`points are on the same line. a:${point.toString(a)} b:${point.toString(b)} c:${point.toString(c)}`)\n    }\n    var array = [a, b, c].sort(point.compare);\n    return {\n      a: array[0],\n      b: array[1],\n      c: array[2],\n    };\n  }\n  throw new TriangleInitError(\"invalid arguments\")\n}\n\n/**\n * \n * @param {triangle} self \n * @param {triangle} other \n */\nexport function equals(self: Triangle, other: Triangle): boolean {\n  return point.equals(self.a, other.a) && point.equals(self.b, other.b) && point.equals(self.c, other.c);\n}\n\nexport function hashCode(t: Triangle): number {\n  var hash = 17;\n  hash = 31 * hash + point.hashCode(t.a);\n  hash = 31 * hash + point.hashCode(t.b);\n  hash = 31 * hash + point.hashCode(t.c);\n  return hash & hash;\n}\n\n/**\n * \n * @param {triangle} triangle \n * @param {line/edge} line \n * @return {array} Point 0 <= array.length <= 3\n */\nexport function getIntersection(triangle: Triangle, ln: Line): Array<Point> {\n  var ab = edge.init(triangle.a, triangle.b);\n  var bc = edge.init(triangle.b, triangle.c);\n  var ca = edge.init(triangle.c, triangle.a);\n  return [ab, bc, ca]\n    .map(e => edge.getIntersection(e, ln))\n    .filter((p: Point | null): p is Point => p !== null)\n    .sort(point.measure);\n}\n\nexport function getOppositeSide(triangle: Triangle, p: Point): Edge {\n  if (point.equals(triangle.a, p)) {\n    return edge.init(triangle.b, triangle.c);\n  } else if (point.equals(triangle.b, p)) {\n    return edge.init(triangle.c, triangle.a);\n  } else if (point.equals(triangle.c, p)) {\n    return edge.init(triangle.a, triangle.b);\n  } else {\n    throw new DiagramError(\"point is not any vertex of a triangle\")\n  }\n}\n\nexport function containsPoint(triangle: Triangle, p: Point, error: number = 0.0): boolean {\n  var x1 = triangle.a.x - p.x;\n  var y1 = triangle.a.y - p.y;\n  var x2 = triangle.b.x - p.x;\n  var y2 = triangle.b.y - p.y;\n  var x3 = triangle.c.x - p.x;\n  var y3 = triangle.c.y - p.y;\n  var v1 = x1 * y2 - y1 * x2;\n  var v2 = x2 * y3 - y2 * x3;\n  var v3 = x3 * y1 - y3 * x1;\n  if (error && error > 0) {\n    return (v1 > -error && v2 > -error && v3 > -error)\n      || (v1 < error && v2 < error && v3 < error);\n  } else {\n    return (v1 >= 0 && v2 >= 0 && v3 >= 0) || (v1 <= 0 && v2 <= 0 && v3 <= 0);\n\n  }\n}\n\nexport function isVertex(triangle: Triangle, p: Point): boolean {\n  return point.equals(triangle.a, p) || point.equals(triangle.b, p) || point.equals(triangle.c, p);\n}\n\nexport function isEdge(triangle: Triangle, e: Edge): boolean {\n  return isVertex(triangle, e.a) && isVertex(triangle, e.b);\n}\n\nexport function hasSameVertex(self: Triangle, other: Triangle): boolean {\n  return isVertex(self, other.a) || isVertex(self, other.b) || isVertex(self, other.c);\n}\n\nexport function getCircumscribed(triangle: Triangle): Circle {\n  const a = triangle.a;\n  const b = triangle.b;\n  const c = triangle.c;\n  var cc = 2 * ((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x));\n  if (cc === 0) {\n    throw new circle.CircleError(\"triangle too small\")\n  }\n  //http://tercel-sakuragaoka.blogspot.jp/2011/06/processingdelaunay_3958.html\n  var p = b.x * b.x - a.x * a.x + b.y * b.y - a.y * a.y;\n  var q = c.x * c.x - a.x * a.x + c.y * c.y - a.y * a.y;\n  var center = {\n    x: ((c.y - a.y) * p + (a.y - b.y) * q) / cc,\n    y: ((a.x - c.x) * p + (b.x - a.x) * q) / cc\n  };\n  var r = point.measure(center, a);\n  return circle.init(center, r);\n}","import { Point } from \"../diagram/types\"\r\nimport { Voronoi } from \"../diagram/voronoi\"\r\n\r\nconst ctx: Worker = self as any  /* eslint-disable-line no-restricted-globals */\r\n\r\ninterface StationPoint extends Point{\r\n  code: number\r\n}\r\n\r\ninterface WorkerState {\r\n  voronoi: Voronoi<StationPoint> | null\r\n  promise: Map<number, ((p: (StationPoint)[]) => void)>\r\n}\r\n\r\nconst state: WorkerState = {\r\n  voronoi: null,\r\n  promise: new Map(),\r\n}\r\n\r\nctx.addEventListener('message', message => {\r\n  const data = JSON.parse(message.data)\r\n  if (data.type === 'start') {\r\n    const container = data.container\r\n    const provider = (point: StationPoint) => {\r\n      return new Promise<(StationPoint)[]>((resolve, reject) => {\r\n        state.promise.set(point.code, resolve)\r\n        ctx.postMessage(JSON.stringify({\r\n          type: 'points',\r\n          code: point.code,\r\n        }))\r\n      })\r\n    }\r\n    const progress = (index: number, polygon: Point[]) => {\r\n      ctx.postMessage(JSON.stringify({\r\n        type: 'progress',\r\n        index: index,\r\n        polygon: polygon.map(point => {\r\n          return { lat: point.y, lng: point.x }\r\n        })\r\n      }))\r\n    }\r\n    state.voronoi = new Voronoi<StationPoint>(container, provider)\r\n    state.voronoi.execute(data.k, data.center, progress).then(() => {\r\n      ctx.postMessage(JSON.stringify({\r\n        type: 'complete',\r\n      }))\r\n    }).catch(e => {\r\n      console.log(e)\r\n      ctx.postMessage(JSON.stringify({\r\n        type: 'error',\r\n        err: e.message\r\n      }))\r\n    })\r\n\r\n\r\n  } else if (data.type === 'points') {\r\n    const resolve = state.promise.get(data.code)\r\n    if (resolve) {\r\n      state.promise.delete(data.code)\r\n      resolve(data.points)\r\n    } else {\r\n      throw new Error(`no promise code:${data.code}`)\r\n    }\r\n  }\r\n})"],"names":["module","exports","runtime","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","o","get","prop","_arrayLikeToArray","arr","len","arr2","Array","allowArrayLike","it","isArray","minLen","toString","from","test","F","s","e","_e","f","normalCompletion","didErr","step","_e2","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_defineProperties","target","props","descriptor","Constructor","protoProps","staticProps","instance","_setPrototypeOf","p","subClass","superClass","_getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_typeof","_possibleConstructorReturn","ReferenceError","Derived","hasNativeReflectConstruct","Super","NewTarget","_construct","Parent","Class","bind","_wrapNativeSuper","_cache","Map","indexOf","has","set","Wrapper","DiagramError","ObjectSet","comparator","hash","collection","compare","map","element","add","tmp","entries","pair","list","every","some","delete","removed","filter","size","clear","consumer","predicate","ZERO","x","y","Number","isFinite","PointInitError","init","digit","isInteger","toFixed","isPoint","equals","p1","p2","hashCode","point","str","charCodeAt","stringHash","isEdge","b","toLine","edge","line","LineInitError","LineError","mes","c","getIntersection","l1","l2","det","VoronoiError","invert","ERROR","Math","pow","Node","_p1","_p2","index","onBoundary","cnt","isBoundary","previous","hasNext","calcNext","hasPrevious","current","other","forward","node","neighbor","isNeighbor","hasNeighbor","t1","t2","level","onSolved","round","Intersection","intersection","center","_previous","_node","dx","dy","incrementIndex","onIntersectionSolved","release","Bisector","bisector","intersections","delaunayPoint","solvedPointIndexFrom","MAX_SAFE_INTEGER","solvedPointIndexTo","boundary","addIntersection","min","max","addIntersectionAt","insert","splice","indexFrom","indexTo","mid","floor","r","Voronoi","frame","provider","container","running","targetLevel","time","callback","bisectors","requestedPoint","addedPoint","performance","now","addBoundary","neighbors","addBisector","searchPolygon","loopTime","promise","traverse","all","console","log","nextLevel","tasks","nextUp","hasSolved","history","sample","nextDown","start","requestExtension","task","preexist","triangle","x1","y1","x2","y2","x3","y3","v1","v2","v3","ctx","voronoi","addEventListener","message","data","JSON","parse","code","postMessage","stringify","execute","k","polygon","lat","lng","catch","points"],"sourceRoot":""}