{"version":3,"file":"static/js/VoronoiWorker.c1f7e196.worker.js","mappings":"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","sources":["../node_modules/regenerator-runtime/runtime.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","diagram/types.ts","diagram/utils.ts","diagram/Point.ts","diagram/Edge.ts","diagram/Line.ts","diagram/Voronoi.ts","diagram/Triangle.ts","script/VoronoiWorker.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","module.exports = require(\"regenerator-runtime\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","\r\nexport interface Point {\r\n\tx: number\r\n\ty: number\r\n}\r\n\r\n\r\nexport interface Line {\r\n\ta: number\r\n\tb: number\r\n\tc: number\r\n}\r\n\r\n\r\nexport interface Edge {\r\n\ta: Point\r\n\tb: Point\r\n}\r\n\r\n\r\nexport interface Triangle {\r\n\ta: Point\r\n\tb: Point\r\n\tc: Point\r\n}\r\n\r\n\r\nexport interface Circle {\r\n\tcenter: Point\r\n\tradius: number\r\n}\r\n\r\nexport interface Rect {\r\n  left: number\r\n  top: number\r\n  right: number\r\n  bottom: number\r\n}\r\n\r\n\r\nexport class DiagramError extends Error {}","\n\nexport function stringHash(str: string): number {\n\t// https://stackoverflow.com/questions/194846/is-there-any-kind-of-hash-code-function-in-javascript\n\t// https://github.com/darkskyapp/string-hash/blob/master/index.js\n\tvar hash = 5381;\n\tif (typeof str === \"string\") {\n\t\tvar i = str.length - 1;\n\t\twhile (i >= 0) {\n\t\t\thash = (hash * 33) ^ str.charCodeAt(i);\n\t\t\ti--;\n\t\t}\n\t}\n\treturn hash & hash;\n}\n\ntype Comparator<E> = (obj1: E, obj2: E) => boolean\ntype HashGetter<E> = (e: E) => number\n\n/**\n * primitiveObject\n * comparator\n * hash\n * comparator(obj1,obj2) === true  hash(obj1) === hash(obj2) \n * \"===\"primitive\n * \n * hash(obj1) === hash(obj2)  comparator(obj1,obj2) === false \n */\nexport class ObjectSet<E> {\n\n\t/**\n\t * \n\t * @param {(obj1,obj2) => boolean} comparator \n\t * @param {(obj) => hashCode} hash \n\t * @param {iterable} collection \n\t */\n\tconstructor(comparator: Comparator<E>, hash: HashGetter<E>, collection?: Array<E>) {\n\t\tthis.compare = comparator;\n\t\tthis.hash = hash;\n\t\tthis.map = new Map();\n\t\tif (collection) {\n\t\t\tcollection.forEach(element => {\n\t\t\t\tthis.add(element);\n\t\t\t});\n\t\t}\n\t}\n\n\tcompare: Comparator<E>\n\thash: HashGetter<E>\n\tmap: Map<number, Array<E>>\n\n\tclone() {\n\t\tvar tmp = new ObjectSet<E>(this.compare, this.hash);\n\t\tfor (let pair of this.map.entries()) {\n\t\t\tvar key: number = pair[0];\n\t\t\tvar list = pair[1];\n\t\t\ttmp.map.set(key, Array.from(list));\n\t\t}\n\t\treturn tmp;\n\t}\n\n\t/**\n\t * \n\t * @param {*} e \n\t * @return {boolean} true, false otherwise\n\t */\n\tadd(e: E): boolean {\n\t\tvar hash = this.hash(e);\n\t\tvar list = this.map.get(hash);\n\t\tif (list) {\n\t\t\tif (list.every(element => !this.compare(element, e))) {\n\t\t\t\tlist.push(e);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t} else {\n\t\t\tlist = [e];\n\t\t\tthis.map.set(hash, list);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t/**\n\t * \n\t * @param {*} e \n\t */\n\thas(e: E): boolean {\n\t\tvar list = this.map.get(this.hash(e));\n\t\treturn !!list && list.some(element => this.compare(element, e));\n\t}\n\n\t/**\n\t * \n\t * @param {*} e \n\t * @return {boolean} true, false otherwise\n\t */\n\tremove(e: E): boolean {\n\t\tvar hash = this.hash(e);\n\t\tvar list = this.map.get(hash);\n\t\tif (list) {\n\t\t\tif (list.length === 1 && this.compare(list[0], e)) {\n\t\t\t\tthis.map.delete(hash);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar removed = list.filter(element => !this.compare(element, e));\n\t\t\tif (list.length === removed.length) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthis.map.set(hash, removed);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tsize(): number {\n\t\tvar size = 0;\n\t\tfor (let list of this.map.values()) {\n\t\t\tsize += list.length;\n\t\t}\n\t\treturn size;\n\t}\n\n\tclear(): void {\n\t\tthis.map.clear();\n\t}\n\n\t/**\n\t * \n\t * @param {(obj) => void} consumer \n\t */\n\tforEach(consumer: (e: E) => void): void {\n\t\tfor (let value of this) {\n\t\t\tconsumer(value);\n\t\t}\n\t}\n\n\t*[Symbol.iterator]() {\n\t\tvar size = 0;\n\t\tfor (let list of this.map.values()) {\n\t\t\tfor (let value of list) {\n\t\t\t\tsize += 1;\n\t\t\t\tyield value;\n\t\t\t}\n\t\t}\n\t\treturn size;\n\t}\n\n\t/**\n\t * \n\t * @param {(obj) => boolean} predicate \n\t */\n\tfilter(predicate: (e: E) => boolean): ObjectSet<E> {\n\t\tvar tmp = new ObjectSet(this.compare, this.hash);\n\t\tfor (let element of this) {\n\t\t\tif (predicate(element)) tmp.add(element);\n\t\t}\n\t\treturn tmp;\n\t}\n\n\t/**\n\t * \n\t * @param {(obj) => boolean} predicate \n\t */\n\tremoveIf(predicate: (e: E) => boolean): ObjectSet<E> {\n\t\tvar tmp = new ObjectSet(this.compare, this.hash);\n\t\tfor (let element of this) {\n\t\t\tif (!predicate(element)) tmp.add(element);\n\t\t}\n\t\treturn tmp;\n\t}\n}\n\ntype MapEntry<K, V> = {\n\tkey: K,\n\tvalue: V | null\n}\n\nexport class ObjectMap<K, V> {\n\n\tconstructor(comparator: Comparator<K>, hash: HashGetter<K>) {\n\t\tthis.compare = comparator;\n\t\tthis.hash = hash;\n\t\tthis.map = new Map();\n\t}\n\n\tcompare: Comparator<K>\n\thash: HashGetter<K>\n\tmap: Map<number, Array<MapEntry<K, V>>>\n\n\tput(key: K, value: V | null): void {\n\t\tvar hash = this.hash(key);\n\t\tvar list = this.map.get(hash);\n\t\tif (list) {\n\t\t\tvar index = list.findIndex(pair => this.compare(pair.key, key));\n\t\t\tif (index < 0) {\n\t\t\t\tvar pair: MapEntry<K, V> = {\n\t\t\t\t\tkey: key,\n\t\t\t\t\tvalue: value\n\t\t\t\t}\n\t\t\t\tlist.push(pair);\n\t\t\t} else {\n\t\t\t\tlist[index].value = value;\n\t\t\t}\n\t\t} else {\n\t\t\tlist = [\n\t\t\t\t{\n\t\t\t\t\tkey: key,\n\t\t\t\t\tvalue: value\n\t\t\t\t}\n\t\t\t];\n\t\t\tthis.map.set(hash, list);\n\t\t}\n\t}\n\n\thas(key: K): boolean {\n\t\tvar list = this.map.get(this.hash(key));\n\t\treturn !!list && list.some(pair => this.compare(pair.key, key));\n\t}\n\n\tget(key: K, defaultValue?: V | null): V | null {\n\t\tvar list = this.map.get(this.hash(key));\n\t\tif (!list) return null;\n\t\tvar index = list.findIndex(pair => this.compare(pair.key, key));\n\t\tif (index < 0) {\n\t\t\tif ( defaultValue ) return defaultValue\n\t\t\treturn null\n\t\t} else {\n\t\t\treturn list[index].value;\n\t\t}\n\t}\n\n\tgetValue(key: K): V {\n\t\tvar value = this.get(key)\n\t\tif ( value ) return value\n\t\tthrow new Error(`no such element. key:${key}`)\n\t}\n\n\t/**\n\t * keyvalue\n\t * @param {*} key \n\t * @return {obj} value, null\n\t */\n\tremove(key: K): V | null {\n\t\tvar hash = this.hash(key);\n\t\tvar list = this.map.get(hash);\n\t\tif (list) {\n\t\t\tif (list.length === 1 && this.compare(list[0].key, key)) {\n\t\t\t\tthis.map.delete(hash);\n\t\t\t\treturn list[0].value;\n\t\t\t}\n\t\t\tvar index = list.findIndex(pair => this.compare(pair.key, key));\n\t\t\tif (index < 0) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tvar value = list[index].value;\n\t\t\t\tvar removed = list.filter(pair => !this.compare(pair.key, key));\n\t\t\t\tthis.map.set(hash, removed);\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tsize(): number {\n\t\tvar size = 0;\n\t\tfor (let list of this.map.values()) {\n\t\t\tsize += list.length;\n\t\t}\n\t\treturn size;\n\t}\n\n\tclear(): void {\n\t\tthis.map.clear();\n\t}\n\n\t/**\n\t * \n\t * @param {(key) => void} consumer \n\t */\n\tforEachKey(consumer: (key: K) => void) {\n\t\tfor (let key of this.keys()) {\n\t\t\tconsumer(key);\n\t\t}\n\t}\n\n\t* keys() {\n\t\tfor (let list of this.map.values()) {\n\t\t\tfor (let entry of list) {\n\t\t\t\tyield entry.key;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * \n\t * @param {(value) => void} consumer \n\t */\n\tforEachValue(consumer: (value: V | null) => void) {\n\t\tfor (let value of this.values()) {\n\t\t\tconsumer(value);\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (let list of this.map.values()) {\n\t\t\tfor (let entry of list) {\n\t\t\t\tyield entry.value;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * \n\t * @param {(entry: {key:any, value:any}) => void} consumer \n\t */\n\tforEachEntries(consumer: (e: MapEntry<K, V>) => void) {\n\t\tfor (let entry of this.entries()) {\n\t\t\tconsumer(entry);\n\t\t}\n\t}\n\n\t* entries() {\n\t\tfor (let list of this.map.values()) {\n\t\t\tfor (let entry of list) {\n\t\t\t\tvar tmp = {\n\t\t\t\t\tkey: entry.key,\n\t\t\t\t\tvalue: entry.value\n\t\t\t\t};\n\t\t\t\tyield tmp;\n\t\t\t}\n\t\t}\n\t}\n\n}","import { stringHash } from \"./utils\"\nimport {Point, DiagramError} from \"./types\"\n\nexport const ZERO: Point = init(0, 0)\n\nclass PointInitError extends DiagramError {\n\tconstructor(x: number, y: number) {\n\t\tsuper(`cannot get an instance with x:${x} y:${y}`)\n\t}\n}\n\nexport function toString(p: Point, digit?: number) {\n\tif (digit && Number.isInteger(digit) && digit > 0) {\n\t\treturn `(${p.x.toFixed(digit)},${p.y.toFixed(digit)})`\n\t}\n\treturn `(${p.x},${p.y})`\n}\n\nexport function isPoint(p: any): p is Point {\n\treturn p !== null && typeof p === \"object\" && typeof p.x === \"number\" && typeof p.y === \"number\"\n}\n\nexport function init(x: number, y: number): Point {\n\tif (Number.isFinite(x) && Number.isFinite(y)) {\n\t\treturn {\n\t\t\tx: x,\n\t\t\ty: y\n\t\t}\n\t}\n\tthrow new PointInitError(x, y)\n}\n\nexport function equals(p1: Point, p2: Point): boolean {\n\treturn p1.x === p2.x && p1.y === p2.y\n}\n\nexport function hashCode(point: Point): number {\n\tvar str = `${point.x.toString()},${point.y.toString}`\n\treturn stringHash(str)\n}\n\nexport function getDivision(p1: Point, p2: Point, index: number): Point {\n\treturn {\n\t\tx: p1.x * (1.0 - index) + p2.x * index,\n\t\ty: p1.y * (1.0 - index) + p2.y * index,\n\t}\n}\n\nexport function measure(p1: Point, p2: Point): number {\n\treturn Math.sqrt(\n\t\tMath.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2)\n\t)\n}\n\nexport function getMiddlePoint(p1: Point, p2: Point): Point {\n\treturn {\n\t\tx: (p1.x + p2.x) / 2,\n\t\ty: (p1.y + p2.y) / 2,\n\t}\n}\n\nexport function compare(p1: Point, p2: Point): number {\n\tif (p1.x === p2.x) {\n\t\tif (p1.y === p2.y) {\n\t\t\treturn 0\n\t\t} else if (p1.y < p2.y) {\n\t\t\treturn -1\n\t\t} else {\n\t\t\treturn 1\n\t\t}\n\t} else if (p1.x < p2.x) {\n\t\treturn -1\n\t} else {\n\t\treturn 1\n\t}\n}","import * as line from \"./Line\";\nimport * as point from \"./Point\";\nimport {Point, Line, Edge, DiagramError} from \"./types\"\n\nexport function toString(e: Edge) {\n\treturn `{${point.toString(e.a)}-${point.toString(e.b)}}`\n}\n\nexport function isEdge(p: any): p is Edge {\n\treturn p !== null &&\n\t\ttypeof p === \"object\" &&\n\t\tpoint.isPoint(p.a) &&\n\t\tpoint.isPoint(p.b)\n\n}\n\nclass EdgeError extends DiagramError {}\n\nclass EdgeInitError extends DiagramError {\n\tconstructor(p: Point) {\n\t\tsuper(`point duplicated: ${point.toString(p)}`)\n\t}\n}\n\nexport function init(a: Point, b: Point): Edge {\n\tif (a.x < b.x) {\n\t\treturn { a: a, b: b };\n\t} else if (a.x > b.x) {\n\t\treturn { a: b, b: a };\n\t} else {\n\t\tif (a.y < b.y) {\n\t\t\treturn { a: a, b: b };\n\t\t} else if (a.y > b.y) {\n\t\t\treturn { a: b, b: a };\n\t\t} else {\n\t\t\tthrow new EdgeInitError(a)\n\t\t}\n\t}\n}\n\nexport function toLine(edge: Edge): Line {\n\treturn line.init(edge.a, edge.b);\n}\n\nexport function equals(self: Edge, other: Edge): boolean {\n\treturn point.equals(self.a, other.a) && point.equals(self.b, other.b);\n}\n\nexport function hashCode(edge: Edge): number {\n\tvar hash = 17;\n\thash = 31 * hash + point.hashCode(edge.a);\n\thash = 31 * hash + point.hashCode(edge.b);\n\treturn hash & hash;\n}\n\nexport function getMiddlepoint(edge: Edge): Point {\n\treturn {\n\t\tx: (edge.a.x + edge.b.x) / 2,\n\t\ty: (edge.a.y + edge.b.y) / 2,\n\t};\n}\n\nexport function onEdge(p1: Edge | Point, p2: Point, p3?: Point): boolean {\n\tif (isEdge(p1)) {\n\t\tp3 = p2\n\t\tvar edge = p1\n\t\tp1 = edge.a\n\t\tp2 = edge.b\n\t}\n\tif (p3) {\n\t\tvar start: Point = p1\n\t\tvar end: Point = p2\n\t\tvar p: Point = p3\n\t\tif ((start.x - p.x) * (end.x - p.x) + (start.y - p.y) * (end.y - p.y) <= 0) {\n\t\t\treturn line.onLine(start, end, p);\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\tthrow new EdgeError(\"invalid arguments\")\n}\n\nexport function getDivision(edge: Edge, index: number): Point {\n\treturn point.getDivision(edge.a, edge.b, index);\n}\n\n/**\n * \n * @param {edge} edge \n * @param {edge/line} other \n * @return null if no such point\n */\nexport function getIntersection(edge: Edge, other: Edge | Line): Point | null {\n\tif (line.isLine(other)) {\n\t\tvar p = line.getIntersection(toLine(edge), other);\n\t\tif (p) {\n\t\t\tvar v = (edge.a.x - p.x) * (edge.b.x - p.x) + (edge.a.y - p.y) * (edge.b.y - p.y);\n\t\t\treturn v <= 0 ? p : null;\n\t\t}\n\t\treturn null\n\t} else {\n\t\tp = getIntersection(edge, toLine(other));\n\t\tif (p) {\n\t\t\tv = (other.a.x - p.x) * (other.b.x - p.x) + (other.a.y - p.y) * (other.b.y - p.y);\n\t\t\tif (v <= 0) return p;\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport function getDistance(edge: Edge, p: Point): number {\n\tvar v1 = (p.x - edge.a.x) * (edge.b.x - edge.a.x) + (p.y - edge.a.y) * (edge.b.y - edge.a.y);\n\tvar v2 = (p.x - edge.b.x) * (edge.a.x - edge.b.x) + (p.y - edge.b.y) * (edge.a.y - edge.b.y);\n\tif (v1 > 0 && v2 > 0) {\n\t\treturn line.getDistance(toLine(edge), p);\n\t} else if (v1 <= 0) {\n\t\treturn point.measure(edge.a, p);\n\t} else {\n\t\treturn point.measure(edge.b, p);\n\t}\n}","import * as point from \"./Point\"\nimport * as edge from \"./Edge\"\nimport {Point, Line, Edge, DiagramError} from \"./types\"\n\nclass LineInitError extends DiagramError {}\n\nclass LineError extends DiagramError {\n\tconstructor(mes: string, line?: Line) {\n\t\tsuper(line ? `${mes} line:${toString(line)}` : mes)\n\t}\n}\n\nexport function toString(line: Line): string {\n\treturn `{ax+by+c=0 with a:${line.a},b:${line.b},c:${line.c}}`\n}\n\nexport function isLine(p: any): p is Line {\n\treturn p !== null &&\n\t\ttypeof p === \"object\" &&\n\t\ttypeof p.a === \"number\" &&\n\t\ttypeof p.b === \"number\" &&\n\t\ttypeof p.c === \"number\"\n}\n\n/**\n * Gets an instance of a new line. Pairs of argments are; \n * (1) a, b, c: number => a line defined by equation: ax + by + c = 0\n * (2) a, b: Point => a line which goes through the both points\n * @param a \n * @param b \n * @param c \n */\nexport function init(a: number | Point, b: number | Point, c?: number): Line {\n\tif (typeof a === \"number\" && typeof b === \"number\") {\n\t\tif (typeof c === \"number\") {\n\t\t\tif (b === 0) {\n\t\t\t\tif (a === 0) {\n\t\t\t\t\tthrow new LineInitError(\"a = b = 0\")\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ta: 1.0,\n\t\t\t\t\tb: 0.0,\n\t\t\t\t\tc: c / a,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\ta: a / b,\n\t\t\t\t\tb: 1.0,\n\t\t\t\t\tc: c / b,\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ta: -a,\n\t\t\t\tb: 1.0,\n\t\t\t\tc: -b,\n\t\t\t};\n\t\t}\n\t} else if (point.isPoint(a) && point.isPoint(b)) {\n\t\tif (point.equals(a, b)) {\n\t\t\tthrow new LineInitError(`duplicated point: ${point.toString(a)}`)\n\t\t} else if (a.x === b.x) {\n\t\t\treturn {\n\t\t\t\ta: 1.0,\n\t\t\t\tb: 0.0,\n\t\t\t\tc: -(a.x + b.x) / 2,\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ta: (b.y - a.y) / (a.x - b.x),\n\t\t\t\tb: 1.0,\n\t\t\t\tc: (b.x * a.y - a.x * b.y) / (a.x - b.x),\n\t\t\t};\n\t\t}\n\t}\n\tthrow new LineInitError(`cannot get an instance with a:${a} b:${b} c:${c}`)\n}\n\n/**\n * Check if a point is located on the given line. \n * (1) a: Line, b: Point => whether point 'b' is located on line 'a' \n * (2) a: Point, b :Point, c: Point => whether point 'c' is located on a line connecting two points 'a' and 'b'\n * @param {line/point} a \n * @param {point} b \n * @param {point} c \n */\nexport function onLine(a: Line | Point, b: Point, c?: Point): boolean {\n\tif (isLine(a) && point.isPoint(b)) {\n\t\tvar line = a;\n\t\tvar p = b;\n\t\treturn Math.abs(line.a * p.x + line.b * p.y + line.c) === 0;\n\t}\n\tif (point.isPoint(a) && point.isPoint(b) && point.isPoint(c)) {\n\t\tvar v = (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x);\n\t\treturn v === 0;\n\t}\n\tthrow new LineError(\"invalid arguments\")\n}\n\nexport function equals(l1: Line, l2: Line): boolean {\n\treturn l1.a === l2.a && l1.b === l2.b && l1.c === l2.c;\n}\n\nexport function getIntersection(l1: Line, l2: Line | Edge): Point | null {\n\tif (edge.isEdge(l2)) {\n\t\t// l1:Line l2:edge\n\t\tvar line = l1;\n\t\tvar e = l2;\n\t\tif ((line.a * e.a.x + line.b * e.a.y + line.c) * (line.a * e.b.x + line.b * e.b.y + line.c) <= 0) {\n\t\t\tl2 = edge.toLine(e);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\t// l1:Line l2:Line\n\tvar det = l1.a * l2.b - l2.a * l1.b;\n\tif (det === 0) {\n\t\treturn null;\n\t} else {\n\t\treturn {\n\t\t\tx: (l1.b * l2.c - l2.b * l1.c) / det,\n\t\t\ty: (l2.a * l1.c - l1.a * l2.c) / det,\n\t\t};\n\t}\n}\n\nexport function getPerpendicularBisector(p1: Point | Edge, p2?: Point): Line {\n\tif (edge.isEdge(p1)) {\n\t\t// p1:edge p2:null\n\t\tvar e = p1;\n\t\tp1 = e.a;\n\t\tp2 = e.b;\n\t}\n\tif (p2) {\n\n\t\t// p1,p2:Point\n\t\treturn {\n\t\t\ta: p1.x - p2.x,\n\t\t\tb: p1.y - p2.y,\n\t\t\tc: (-Math.pow(p1.x, 2) - Math.pow(p1.y, 2) + Math.pow(p2.x, 2) + Math.pow(p2.y, 2)) / 2,\n\t\t}\n\t}\n\tthrow new LineError(`invalid arguments p1:${p1},p2:${p2}`)\n}\n\nexport function getDistance(line: Line, point: Point): number {\n\treturn Math.abs(point.x * line.a + point.y * line.b + line.c) / Math.sqrt(line.a * line.a + line.b * line.b);\n}\n\nexport function onSameSide(line: Line, p1: Point, p2: Point): boolean {\n\tvar v1 = line.a * p1.x + line.b * p1.y + line.c;\n\tvar v2 = line.a * p2.x + line.b * p2.y + line.c;\n\treturn v1 * v2 >= 0;\n}\n","import { Point, Line, Edge, Triangle, DiagramError } from \"./types\"\nimport * as point from \"./Point\";\nimport * as line from \"./Line\";\nimport * as triangle from \"./Triangle\";\nimport { ObjectSet } from \"./utils\";\n\nclass VoronoiError extends DiagramError {\n\tconstructor(mes: string) {\n\t\tsuper(mes)\n\t}\n}\n\n/**\n * \n */\ntype StepDirection = \"up\" | \"zero\" | \"down\"\n\nfunction invert(step: StepDirection): StepDirection {\n\tswitch (step) {\n\t\tcase \"up\":\n\t\t\treturn \"down\"\n\t\tcase \"down\":\n\t\t\treturn \"up\"\n\t\tcase \"zero\":\n\t\t\treturn \"zero\"\n\t}\n}\n\nconst ERROR = Math.pow(2, -30);\n\n/**\n * Point +    \n * Bisector\n */\nclass Node implements Point {\n\n\tconstructor(p: Point, a: Intersection, b: Intersection) {\n\t\tthis.x = p.x;\n\t\tthis.y = p.y;\n\t\tthis._p1 = a;\n\t\tthis._p2 = b;\n\t\tvar cnt = 0;\n\t\tif (a.line.isBoundary) cnt++;\n\t\tif (b.line.isBoundary) cnt++;\n\t\tif (cnt === 0) {\n\t\t\tthis.onBoundary = false;\n\t\t\tthis.index = -1;\n\t\t} else if (cnt === 1) {\n\t\t\tthis.onBoundary = true;\n\t\t\tthis.index = -1;\n\t\t} else {\n\t\t\tthis.onBoundary = false;\n\t\t\tthis.index = 0;\n\t\t}\n\t}\n\n\tx: number\n\ty: number\n\n\t// \n\t_p1: Intersection | null\n\t_p2: Intersection | null\n\n\tget p1(): Intersection {\n\t\tif (this._p1) return this._p1\n\t\tthrow new VoronoiError(\"no intersection\")\n\t}\n\n\n\tget p2(): Intersection {\n\t\tif (this._p2) return this._p2\n\t\tthrow new VoronoiError(\"no intersection\")\n\t}\n\n\tindex: number\n\tonBoundary: boolean\n\n\t/**\n\t * .\n\t * @param previous from which you are traversing\n\t * @return Node\n\t */\n\tnext(previous: Point) {\n\t\tconst p1 = this.p1;\n\t\tconst p2 = this.p2;\n\t\tif (p1.hasNext && point.equals(p1.next, previous)) {\n\t\t\treturn this.calcNext(p1, p2, false, invert(p1.step));\n\t\t} else if (p1.hasPrevious && point.equals(p1.previous, previous)) {\n\t\t\treturn this.calcNext(p1, p2, true, p1.step);\n\t\t} else if (p2.hasNext && point.equals(p2.next, previous)) {\n\t\t\treturn this.calcNext(p2, p1, false, invert(p2.step));\n\t\t} else if (p2.hasPrevious && point.equals(p2.previous, previous)) {\n\t\t\treturn this.calcNext(p2, p1, true, p2.step);\n\t\t} else {\n\t\t\tthrow new VoronoiError(\"next node not found.\");\n\t\t}\n\t}\n\n\tcalcNext(current: Intersection, other: Intersection, forward: boolean, step: StepDirection) {\n\t\tif (this.onBoundary && this.index > 0) {\n\t\t\t// FrameVertex\n\t\t\t// \n\t\t\treturn forward ? current.next.node : current.previous.node;\n\t\t} else {\n\t\t\t// Frame step = Node.STEP_UP/DOWN\n\t\t\t// FrameVertex step = Node.STEP_ZERO\n\t\t\treturn other.neighbor(invert(step)).node;\n\t\t}\n\t}\n\n\t/**\n\t * \n\t\t\t\t * .<br>\n\t\t\t\t * Frame\n\t\t\t\t * FrameVertex0\n\t * @param previous \n\t */\n\tnextDown(previous: Point): Node {\n\t\tvar target: any = null;\n\t\tif (this.p1.isNeighbor(previous)) {\n\t\t\ttarget = this.p2;\n\t\t} else if (this.p2.isNeighbor(previous)) {\n\t\t\ttarget = this.p1;\n\t\t} else {\n\t\t\tthrow new VoronoiError(\"neighbor not found\");\n\t\t}\n\t\tif (target.hasNeighbor(\"down\")) {\n\t\t\treturn target.neighbor(\"down\").node;\n\t\t} else {\n\t\t\treturn target.neighbor(\"zero\").node;\n\t\t}\n\t}\n\n\tnextUp(previous: Point): Node | null {\n\t\tvar t1: any = null;\n\t\tvar t2: any = null;\n\t\tif (this.p1.isNeighbor(previous)) {\n\t\t\tt1 = this.p2;\n\t\t\tt2 = this.p1;\n\t\t} else if (this.p2.isNeighbor(previous)) {\n\t\t\tt1 = this.p1;\n\t\t\tt2 = this.p2;\n\t\t} else {\n\t\t\tthrow new VoronoiError(\"neighbor not found\");\n\t\t}\n\t\tif (t1.hasNeighbor(\"up\")) {\n\t\t\treturn t1.neighbor(\"up\").node;\n\t\t} else if (t2.hasNeighbor(\"up\")) {\n\t\t\treturn t2.neighbor(\"up\").node;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tonSolved(level: number): void {\n\t\tthis.p1.onSolved();\n\t\tthis.p2.onSolved();\n\t\tif (this.index < 0) {\n\t\t\tif (this.p1.line.isBoundary || this.p2.line.isBoundary) {\n\t\t\t\tthis.index = level;\n\t\t\t} else {\n\t\t\t\tthis.index = level + 0.5;\n\t\t\t}\n\t\t} else if (Math.round(this.index) !== this.index) {\n\t\t\tif (this.index + 0.5 !== level) throw new VoronoiError(\"index mismatch\");\n\t\t}\n\t}\n\n\thasSolved(): boolean {\n\t\treturn this.index >= 0;\n\t}\n\n\trelease() {\n\t\tthis._p1 = null;\n\t\tthis._p2 = null;\n\t}\n\n}\n\n/**\n * \n * \n */\nclass Intersection implements Point {\n\n\tconstructor(intersection: Point, b: Bisector, other?: Line, center?: Point) {\n\t\tthis.line = b;\n\t\tthis.x = intersection.x;\n\t\tthis.y = intersection.y;\n\n\t\tif (other && center) {\n\n\t\t\tvar dx = b.line.b;\n\t\t\tvar dy = -b.line.a;\n\t\t\tif (dx < 0 || (dx === 0 && dy < 0)) {\n\t\t\t\tdx *= -1;\n\t\t\t\tdy *= -1;\n\t\t\t}\n\t\t\tvar p = {\n\t\t\t\tx: intersection.x + dx,\n\t\t\t\ty: intersection.y + dy\n\t\t\t};\n\t\t\tthis.step = line.onSameSide(other, p, center) ? \"down\" : \"up\";\n\t\t} else {\n\t\t\tthis.step = \"zero\";\n\t\t}\n\t}\n\n\tx: number\n\ty: number\n\tline: Bisector\n\tstep: StepDirection\n\n\t_previous: Intersection | null | undefined = undefined\n\t_next: Intersection | null | undefined = undefined\n\tindex: number = 0\n\n\t_node: Node | null = null\n\n\tget hasPrevious(): boolean {\n\t\tif (this._previous === undefined) {\n\t\t\tthrow new VoronoiError(\"previous not init yet\")\n\t\t}\n\t\treturn this._previous !== null\n\t}\n\n\tget previous(): Intersection {\n\t\tif (this._previous) return this._previous\n\t\tif (this._previous === undefined) {\n\t\t\tthrow new VoronoiError(\"previous not init yet\")\n\t\t}\n\t\tthrow new VoronoiError(\"no previous\")\n\t}\n\n\tget hasNext(): boolean {\n\t\tif (this._next === undefined) {\n\t\t\tthrow new VoronoiError(\"next not init yet\")\n\t\t}\n\t\treturn this._next !== null\n\t}\n\n\tget next(): Intersection {\n\t\tif (this._next) return this._next\n\t\tif (this._next === undefined) {\n\t\t\tthrow new VoronoiError(\"next not init yet\")\n\t\t}\n\t\tthrow new VoronoiError(\"no next\")\n\t}\n\n\tget node(): Node {\n\t\tif (this._node) return this._node\n\t\tthrow new VoronoiError(\"no node\")\n\t}\n\n\tset node(value: Node) {\n\t\tif (this._node) throw new VoronoiError(\"node already set\")\n\t\tthis._node = value\n\t}\n\n\tinsert(previous: Intersection | null, next: Intersection | null, index: number): void {\n\t\tthis._previous = previous;\n\t\tthis._next = next;\n\t\tif (this._previous) {\n\t\t\tthis._previous._next = this;\n\t\t}\n\t\tif (this._next) {\n\t\t\tthis._next._previous = this;\n\t\t\tthis._next.incrementIndex();\n\t\t}\n\t\tthis.index = index;\n\t}\n\n\tincrementIndex(): void {\n\t\tthis.index++;\n\t\tif (this._next) this._next.incrementIndex();\n\t}\n\n\tisNeighbor(p: Point): boolean {\n\t\treturn (this.hasNext && point.equals(this.next, p))\n\t\t\t|| (this.hasPrevious && point.equals(this.previous, p));\n\t}\n\n\thasNeighbor(step: StepDirection): boolean {\n\t\tif (step === \"zero\" && this.step === \"zero\") {\n\t\t\treturn true;\n\t\t} else if (step !== \"zero\" && this.step !== \"zero\") {\n\t\t\treturn (step === this.step) ? !!this._next : !!this._previous;\n\t\t}\n\t\treturn false;\n\t}\n\n\tneighbor(step: StepDirection): Intersection {\n\t\tif (step === \"zero\" && this.step === \"zero\") {\n\t\t\tif (this._previous) return this._previous;\n\t\t\tif (this._next) return this._next;\n\t\t} else if (step !== \"zero\" && this.step !== \"zero\") {\n\t\t\treturn (step === this.step) ? this.next : this.previous;\n\t\t}\n\t\tthrow new VoronoiError(\"neighbor step invalid.\");\n\t}\n\n\tonSolved(): void {\n\t\tthis.line.onIntersectionSolved(this);\n\t}\n\n\trelease(): void {\n\t\tthis._previous = null;\n\t\tthis._next = null;\n\t\tif (this._node) {\n\t\t\tthis._node.release();\n\t\t\tthis._node = null;\n\t\t}\n\t}\n}\n\n/**\n * \n */\nclass Bisector {\n\n\tconstructor(bisector: Line, p?: Point) {\n\t\tthis.line = bisector;\n\t\tthis.intersections = [];\n\t\tif (p) {\n\t\t\tthis.delaunayPoint = p;\n\t\t\tthis.isBoundary = false;\n\t\t} else {\n\t\t\tthis.delaunayPoint = null;\n\t\t\tthis.isBoundary = true;\n\t\t}\n\t}\n\n\tline: Line\n\tintersections: Array<Intersection>\n\tisBoundary: boolean\n\tdelaunayPoint: Point | null\n\n\tsolvedPointIndexFrom: number = Number.MAX_SAFE_INTEGER\n\tsolvedPointIndexTo: number = -1\n\n\t/**\n\t * \n\t * @param boundary\n\t */\n\tinspectBoundary(boundary: Edge): void {\n\t\tvar p = line.getIntersection(this.line, boundary);\n\t\tif (p) {\n\t\t\tvar i = new Intersection(p, this)\n\t\t\tthis.addIntersection(i);\n\t\t}\n\t}\n\n\tonIntersectionSolved(intersection: Intersection): void {\n\t\tvar index = intersection.index;\n\t\tthis.solvedPointIndexFrom = Math.min(\n\t\t\tthis.solvedPointIndexFrom,\n\t\t\tindex\n\t\t);\n\t\tthis.solvedPointIndexTo = Math.max(\n\t\t\tthis.solvedPointIndexTo,\n\t\t\tindex\n\t\t);\n\t}\n\n\taddIntersection(intersection: Intersection): void {\n\t\tconst size = this.intersections.length;\n\t\tvar index = this.addIntersectionAt(intersection, 0, size);\n\t\tintersection.insert(\n\t\t\tindex > 0 ? this.intersections[index - 1] : null,\n\t\t\tindex < size ? this.intersections[index] : null,\n\t\t\tindex\n\t\t);\n\t\tthis.intersections.splice(index, 0, intersection);\n\t\tif (this.solvedPointIndexFrom < this.solvedPointIndexTo) {\n\t\t\tif (index <= this.solvedPointIndexFrom) {\n\t\t\t\tthis.solvedPointIndexFrom++;\n\t\t\t\tthis.solvedPointIndexTo++;\n\t\t\t} else if (index <= this.solvedPointIndexTo) {\n\t\t\t\tthrow new VoronoiError(\"new intersection added to solved range.\");\n\t\t\t}\n\t\t}\n\t}\n\n\taddIntersectionAt(p: Point, indexFrom: number, indexTo: number): number {\n\t\tif (indexFrom === indexTo) {\n\t\t\treturn indexFrom;\n\t\t} else {\n\t\t\tvar mid = Math.floor((indexFrom + indexTo - 1) / 2);\n\t\t\tvar r = point.compare(p, this.intersections[mid]);\n\t\t\tif (r < 0) {\n\t\t\t\treturn this.addIntersectionAt(p, indexFrom, mid);\n\t\t\t} else if (r > 0) {\n\t\t\t\treturn this.addIntersectionAt(p, mid + 1, indexTo);\n\t\t\t} else {\n\t\t\t\tthrow new VoronoiError(\"same point already added in this bisector\");\n\t\t\t}\n\t\t}\n\t}\n\n\trelease(): void {\n\t\tthis.intersections.forEach(i => i.release());\n\t\tthis.intersections.splice(0, this.intersections.length)\n\t}\n\n}\n\n/** \n * \n */\nexport type PointProvider = (p: Point) => Promise<Array<Point>>\n\n/**\n * \n * @param index \n * @param polygon \n */\nexport type Callback = (index: number, polygon: Array<Point>) => void\n\n/**\n * \n */\nexport class Voronoi {\n\n\t/**\n\t * \n\t * @param {triangle} frame \n\t * @param {(point)=>Promise<array>} provider \n\t */\n\tconstructor(frame: Triangle, provider: PointProvider) {\n\t\tthis.container = frame;\n\t\tthis.provider = provider;\n\t}\n\n\tcontainer: Triangle\n\tprovider: PointProvider\n\trunning: boolean = false\n\n\t/**\n\t * \n\t * \n\t * \n\t * @param {number} level \n\t * @param {point} center \n\t * @param {(index: number,polygon: array)=>void} callback \n\t * @return 1..indexPromise\n\t */\n\tasync execute(level: number, center: Point, callback: Callback | null): Promise<Array<Array<Point>>> {\n\t\tif (this.running) return Promise.reject(\"already running\");\n\t\tthis.running = true;\n\n\t\ttry {\n\n\t\t\tthis.center = center;\n\t\t\tthis.level = level;\n\t\t\tthis.targetLevel = 1;\n\t\t\tthis.list = null;\n\t\t\tthis.time = performance.now();\n\t\t\tthis.result = [];\n\t\t\tthis.callback = callback;\n\t\t\tthis.bisectors = [];\n\t\t\tthis.addBoundary(line.init(this.container.a, this.container.b));\n\t\t\tthis.addBoundary(line.init(this.container.b, this.container.c));\n\t\t\tthis.addBoundary(line.init(this.container.c, this.container.a));\n\t\t\tthis.requestedPoint = new ObjectSet(point.equals, point.hashCode);\n\t\t\tthis.addedPoint = new ObjectSet(point.equals, point.hashCode);\n\t\t\tthis.requestedPoint.add(center);\n\t\t\tthis.addedPoint.add(center);\n\t\t\tconst neighbors = await this.provider(center);\n\t\t\tfor (let p of neighbors) {\n\t\t\t\tif (this.addedPoint.add(p))\n\t\t\t\t\tthis.addBisector(p);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn Promise.reject(e)\n\t\t}\n\t\treturn this.searchPolygon();\n\n\t}\n\n\tcenter: Point = point.ZERO\n\tlevel: number = 0\n\ttargetLevel: number = 1\n\tlist: Array<Node> | null = null\n\ttime: number = 0\n\tresult: Array<Array<Point>> = []\n\tcallback: Callback | null = null\n\tbisectors: Array<Bisector> = []\n\n\n\trequestedPoint: ObjectSet<Point> = new ObjectSet(point.equals, point.hashCode)\n\taddedPoint: ObjectSet<Point> = new ObjectSet(point.equals, point.hashCode)\n\n\tprivate async searchPolygon(): Promise<Array<Array<Point>>> {\n\t\tvar loopTime = performance.now();\n\t\tvar promise: Array<Promise<void>> = [];\n\t\tvar list = this.traverse(this.list, promise);\n\t\tlist.forEach(node => node.onSolved(this.targetLevel));\n\t\tthis.result.push(list);\n\t\tthis.list = list;\n\t\tawait Promise.all(promise);\n\n\t\tconsole.log(`execute index:${this.targetLevel} time:${performance.now() - loopTime}`);\n\t\tif (this.callback && this.list) {\n\t\t\tthis.callback(this.targetLevel - 1, this.list);\n\t\t}\n\t\tconst nextLevel = this.targetLevel + 1;\n\t\tif (nextLevel <= this.level) {\n\t\t\tthis.targetLevel = nextLevel;\n\t\t\treturn this.searchPolygon();\n\t\t} else {\n\t\t\tthis.bisectors.forEach(b => b.release());\n\t\t\tconsole.log(`execute done. time:${performance.now() - this.time}`);\n\n\t\t\tthis.running = false;\n\n\t\t\treturn this.result;\n\t\t}\n\n\t}\n\n\tprivate traverse(list: Array<Node> | null, tasks: Array<Promise<void>>) {\n\t\tvar next: Node | null = null\n\t\tvar previous: Node | null = null\n\t\tif (!list) {\n\t\t\tvar history = new ObjectSet(point.equals, point.hashCode);\n\t\t\tvar sample = this.bisectors[0];\n\t\t\tnext = sample.intersections[1].node;\n\t\t\tprevious = sample.intersections[0].node;\n\t\t\twhile (history.add(next)) {\n\t\t\t\tvar current: Node = next;\n\t\t\t\tnext = current.nextDown(previous);\n\t\t\t\tprevious = current;\n\t\t\t}\n\t\t} else {\n\t\t\tprevious = list[list.length - 1];\n\t\t\tfor (let n of list) {\n\t\t\t\tnext = n.nextUp(previous);\n\t\t\t\tprevious = n;\n\t\t\t\tif (next && !next.hasSolved()) break;\n\t\t\t}\n\t\t}\n\n\t\tif (!next || !previous || next.hasSolved()) {\n\t\t\tthrow new VoronoiError(\"fail to traverse polygon\");\n\t\t}\n\n\t\tvar start = next;\n\t\tlist = [start];\n\t\twhile (true) {\n\t\t\tthis.requestExtension(next.p1.line.delaunayPoint, tasks);\n\t\t\tthis.requestExtension(next.p2.line.delaunayPoint, tasks);\n\t\t\tcurrent = next;\n\t\t\tnext = current.next(previous);\n\t\t\tprevious = current;\n\t\t\tif (point.equals(start, next)) break;\n\t\t\tlist.push(next);\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tprivate requestExtension(target: Point | null, tasks: Array<Promise<void>>): void {\n\t\tif (target && this.requestedPoint.add(target)) {\n\t\t\tvar task = this.provider(target).then(neighbors => {\n\t\t\t\tfor (let p of neighbors) {\n\t\t\t\t\tif (this.addedPoint.add(p)) {\n\t\t\t\t\t\tthis.addBisector(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\ttasks.push(task);\n\t\t}\n\t}\n\n\t/**\n\t * \n\t * @param {*} self Line \n\t */\n\tprivate addBoundary(self: Line): void {\n\t\tvar boundary = new Bisector(self);\n\t\tthis.bisectors.forEach(preexist => {\n\t\t\tvar p = line.getIntersection(boundary.line, preexist.line);\n\t\t\tif (!p) throw new VoronoiError(\"intersection not found\")\n\t\t\tvar a = new Intersection(p, boundary);\n\t\t\tvar b = new Intersection(p, preexist);\n\t\t\tvar n = new Node(p, a, b);\n\t\t\ta.node = n;\n\t\t\tb.node = n;\n\t\t\tboundary.addIntersection(a);\n\t\t\tpreexist.addIntersection(b);\n\t\t});\n\t\tthis.bisectors.push(boundary);\n\t}\n\n\tprivate addBisector(intersection: Point) {\n\t\tvar bisector = new Bisector(\n\t\t\tline.getPerpendicularBisector(intersection, this.center),\n\t\t\tintersection\n\t\t);\n\t\tthis.bisectors.forEach(preexist => {\n\t\t\tvar p = line.getIntersection(bisector.line, preexist.line);\n\t\t\tif (p && triangle.containsPoint(this.container, p, ERROR)) {\n\t\t\t\tvar a = new Intersection(p, bisector, preexist.line, this.center);\n\t\t\t\tvar b = new Intersection(p, preexist, bisector.line, this.center);\n\t\t\t\tvar n = new Node(p, a, b);\n\t\t\t\ta.node = n;\n\t\t\t\tb.node = n;\n\t\t\t\tbisector.addIntersection(a);\n\t\t\t\tpreexist.addIntersection(b);\n\t\t\t}\n\t\t});\n\t\tthis.bisectors.push(bisector);\n\t}\n\n\n\n}","import * as line from \"./Line\";\nimport * as point from \"./Point\";\nimport * as edge from \"./Edge\";\nimport * as circle from \"./Circle\";\nimport {Point, Line, Edge, Triangle, Circle, DiagramError} from \"./types\"\n\nclass TriangleInitError extends DiagramError {}\n\nexport function init(a: Edge | Point,b: Point,c?: Point): Triangle{\n\tif ( edge.isEdge(a) ){\n\t\tvar e = a;\n\t\tc = b;\n\t\tb = e.b;\n\t\ta = e.a;\n\t}\n\tif ( c ){\n\n\t\tif ( line.onLine(a,b,c) ) {\n\t\t\tthrow new TriangleInitError(`points are on the same line. a:${point.toString(a)} b:${point.toString(b)} c:${point.toString(c)}`)\n\t\t}\n\t\tvar array = [a,b,c].sort(point.compare);\n\t\treturn {\n\t\t\ta: array[0],\n\t\t\tb: array[1],\n\t\t\tc: array[2],\n\t\t};\n\t}\n\tthrow new TriangleInitError(\"invalid arguments\")\n}\n\n/**\n * \n * @param {triangle} self \n * @param {triangle} other \n */\nexport function equals(self: Triangle,other: Triangle): boolean{\n\treturn point.equals(self.a,other.a) && point.equals(self.b,other.b) && point.equals(self.c, other.c);\n}\n\nexport function hashCode(t: Triangle): number{\n\tvar hash = 17;\n\thash = 31 * hash + point.hashCode(t.a);\n\thash = 31 * hash + point.hashCode(t.b);\n\thash = 31 * hash + point.hashCode(t.c);\n\treturn hash & hash;\n}\n\n/**\n * \n * @param {triangle} triangle \n * @param {line/edge} line \n * @return {array} Point 0 <= array.length <= 3\n */\nexport function getIntersection(triangle: Triangle,ln: Line): Array<Point>{\n\tvar ab = edge.init(triangle.a, triangle.b);\n\tvar bc = edge.init(triangle.b, triangle.c);\n\tvar ca = edge.init(triangle.c, triangle.a);\n\treturn [ab,bc,ca]\n\t\t.map( e => edge.getIntersection(e, ln) )\n\t\t.filter( (p: Point | null): p is Point => p !== null )\n\t\t.sort(point.measure);\n}\n\nexport function getOppositeSide(triangle: Triangle, p: Point): Edge{\n\tif ( point.equals(triangle.a, p) ){\n\t\treturn edge.init(triangle.b, triangle.c);\n\t} else if ( point.equals(triangle.b, p) ){\n\t\treturn edge.init(triangle.c, triangle.a);\n\t} else if ( point.equals(triangle.c, p) ){\n\t\treturn edge.init(triangle.a, triangle.b);\n\t} else {\n\t\tthrow new DiagramError(\"point is not any vertex of a triangle\")\n\t}\n}\n\nexport function containsPoint(triangle: Triangle, p: Point, error: number = 0.0): boolean {\n\tvar x1 = triangle.a.x - p.x;\n\tvar y1 = triangle.a.y - p.y;\n\tvar x2 = triangle.b.x - p.x;\n\tvar y2 = triangle.b.y - p.y;\n\tvar x3 = triangle.c.x - p.x;\n\tvar y3 = triangle.c.y - p.y;\n\tvar v1 = x1 * y2 - y1 * x2;\n\tvar v2 = x2 * y3 - y2 * x3;\n\tvar v3 = x3 * y1 - y3 * x1;\n\tif ( error && error > 0 ){\n\t\treturn (v1 > -error && v2 > -error && v3 > -error ) \n\t\t\t|| (v1 < error && v2 < error && v3 < error);\n\t} else {\n\t\treturn (v1 >= 0 && v2 >= 0 && v3 >= 0) || (v1 <= 0 && v2 <= 0 && v3 <= 0);\n\n\t}\n}\n\nexport function isVertex(triangle: Triangle ,p: Point): boolean{\n\treturn point.equals(triangle.a,p) || point.equals(triangle.b,p) || point.equals(triangle.c,p);\n}\n\nexport function isEdge(triangle: Triangle, e: Edge): boolean{\n\treturn isVertex(triangle,e.a) && isVertex(triangle,e.b);\n}\n\nexport function hasSameVertex(self: Triangle, other: Triangle): boolean{\n\treturn isVertex(self, other.a) || isVertex(self, other.b) || isVertex(self, other.c);\n}\n\nexport function getCircumscribed(triangle: Triangle): Circle{\n\tconst a = triangle.a;\n\tconst b = triangle.b;\n\tconst c = triangle.c;\n\tvar cc = 2 * ((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x));\n\tif ( cc === 0 ) {\n\t\tthrow new circle.CircleError(\"triangle too small\")\n\t}\n\t//http://tercel-sakuragaoka.blogspot.jp/2011/06/processingdelaunay_3958.html\n\tvar p = b.x * b.x - a.x * a.x + b.y * b.y - a.y * a.y;\n\tvar q = c.x * c.x - a.x * a.x + c.y * c.y - a.y * a.y;\n\tvar center = {\n\t\tx: ((c.y - a.y) * p + (a.y - b.y) * q) / cc,\n\t\ty: ((a.x - c.x) * p + (b.x - a.x) * q) / cc\n\t};\n\tvar r = point.measure(center, a);\n\treturn circle.init(center, r);\n}","import { Voronoi } from \"../diagram/Voronoi\"\r\nimport { Point } from \"../diagram/types\"\r\n\r\nconst ctx: Worker = self as any;  /* eslint-disable-line no-restricted-globals */\r\n\r\ninterface WorkerState {\r\n\tvoronoi: Voronoi | null\r\n\tpromise: Map<number, ((p: Point[]) => void)>\r\n}\r\n\r\nconst state: WorkerState = {\r\n\tvoronoi: null,\r\n\tpromise: new Map(),\r\n};\r\n\r\nctx.addEventListener('message', messaage => {\r\n\tvar data = JSON.parse(messaage.data);\r\n\tconsole.log(\"worker\", data);\r\n\tif (data.type === 'start') {\r\n\t\tvar container = data.container;\r\n\t\tvar provider = function (point) {\r\n\t\t\treturn new Promise<Point[]>((resolve, reject) => {\r\n\t\t\t\tstate.promise.set(point.code, resolve);\r\n\t\t\t\tctx.postMessage(JSON.stringify({\r\n\t\t\t\t\ttype: 'points',\r\n\t\t\t\t\tcode: point.code,\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\t\t};\r\n\t\tvar progress = (index: number, polygon: Point[]) => {\r\n\t\t\tctx.postMessage(JSON.stringify({\r\n\t\t\t\ttype: 'progress',\r\n\t\t\t\tindex: index,\r\n\t\t\t\tpolygon: polygon.map(point => {\r\n\t\t\t\t\treturn { lat: point.y, lng: point.x };\r\n\t\t\t\t})\r\n\t\t\t}));\r\n\t\t}\r\n\t\tstate.voronoi = new Voronoi(container, provider);\r\n\t\tstate.voronoi.execute(data.k, data.center, progress).then(() => {\r\n\t\t\tctx.postMessage(JSON.stringify({\r\n\t\t\t\ttype: 'complete',\r\n\t\t\t}));\r\n\t\t}).catch(e => {\r\n\t\t\tconsole.log(e)\r\n\t\t\tctx.postMessage(JSON.stringify({\r\n\t\t\t\ttype: 'error',\r\n\t\t\t\terr: e.message\r\n\t\t\t}));\r\n\t\t})\r\n\r\n\r\n\t} else if (data.type === 'points') {\r\n\t\tvar resolve = state.promise.get(data.code);\r\n\t\tif (resolve) {\r\n\t\t\tstate.promise.delete(data.code);\r\n\t\t\tresolve(data.points);\r\n\t\t} else {\r\n\t\t\tthrow new Error(`no promise code:${data.code}`);\r\n\t\t}\r\n\t}\r\n});"],"names":["runtime","exports","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","o","get","prop","_arrayLikeToArray","arr","len","arr2","Array","allowArrayLike","it","isArray","minLen","toString","from","test","F","s","e","_e","f","normalCompletion","didErr","step","_e2","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_defineProperties","target","props","descriptor","Constructor","protoProps","staticProps","instance","_setPrototypeOf","p","subClass","superClass","_getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_typeof","_possibleConstructorReturn","ReferenceError","Derived","hasNativeReflectConstruct","Super","NewTarget","_construct","Parent","Class","bind","_wrapNativeSuper","_cache","Map","indexOf","has","set","Wrapper","DiagramError","ObjectSet","comparator","hash","collection","compare","map","element","add","tmp","entries","pair","list","every","some","delete","removed","filter","size","clear","consumer","predicate","ZERO","x","y","Number","isFinite","PointInitError","init","digit","isInteger","toFixed","isPoint","equals","p1","p2","hashCode","point","str","charCodeAt","stringHash","isEdge","b","toLine","edge","line","LineInitError","LineError","mes","c","getIntersection","l1","l2","det","VoronoiError","invert","ERROR","Math","pow","Node","_p1","_p2","index","onBoundary","cnt","isBoundary","previous","hasNext","calcNext","hasPrevious","current","other","forward","node","neighbor","isNeighbor","hasNeighbor","t1","t2","level","onSolved","round","Intersection","intersection","center","_previous","_node","dx","dy","incrementIndex","onIntersectionSolved","release","Bisector","bisector","intersections","delaunayPoint","solvedPointIndexFrom","MAX_SAFE_INTEGER","solvedPointIndexTo","boundary","addIntersection","min","max","addIntersectionAt","insert","splice","indexFrom","indexTo","mid","floor","r","Voronoi","frame","provider","container","running","targetLevel","time","callback","bisectors","requestedPoint","addedPoint","performance","now","addBoundary","neighbors","addBisector","searchPolygon","loopTime","promise","traverse","all","console","log","nextLevel","tasks","nextUp","hasSolved","history","sample","nextDown","start","requestExtension","task","preexist","triangle","x1","y1","x2","y2","x3","y3","v1","v2","v3","ctx","voronoi","addEventListener","messaage","data","JSON","parse","code","postMessage","stringify","execute","k","polygon","lat","lng","catch","message","points"],"sourceRoot":""}